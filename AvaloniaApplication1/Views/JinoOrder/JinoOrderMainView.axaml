<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:AvaloniaApplication1.ViewModels.JinoOrder"
             xmlns:views="using:AvaloniaApplication1.Views.JinoOrder"
             mc:Ignorable="d" d:DesignWidth="1280" d:DesignHeight="800"
             x:Class="AvaloniaApplication1.Views.JinoOrder.JinoOrderMainView"
             x:DataType="vm:JinoOrderMainViewModel">
  <Design.DataContext>
    <vm:JinoOrderMainViewModel />
  </Design.DataContext>

  <UserControl.Styles>
    <!-- 사이드바 스타일 -->
    <Style Selector="Border.sidebar">
      <Setter Property="Background" Value="#1A1A2E"/>
      <Setter Property="Width" Value="240"/>
    </Style>

    <!-- 사이드바 메뉴 버튼 -->
    <Style Selector="Button.sidebar-menu">
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="Foreground" Value="#FFFFFFB3"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="Padding" Value="16,14"/>
      <Setter Property="HorizontalContentAlignment" Value="Left"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Margin" Value="8,2"/>
      <Setter Property="Cursor" Value="Hand"/>
    </Style>
    <Style Selector="Button.sidebar-menu:pointerover /template/ ContentPresenter">
      <Setter Property="Background" Value="#FFFFFF15"/>
    </Style>
    <Style Selector="Button.sidebar-menu-active">
      <Setter Property="Background" Value="#0078D4"/>
      <Setter Property="Foreground" Value="White"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="Padding" Value="16,14"/>
      <Setter Property="HorizontalContentAlignment" Value="Left"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Margin" Value="8,2"/>
      <Setter Property="Cursor" Value="Hand"/>
    </Style>
    <Style Selector="Button.sidebar-menu-active:pointerover /template/ ContentPresenter">
      <Setter Property="Background" Value="#1084D8"/>
    </Style>

    <!-- 헤더 스타일 -->
    <Style Selector="Border.header">
      <Setter Property="Background" Value="{DynamicResource SystemControlBackgroundAltHighBrush}"/>
      <Setter Property="Height" Value="64"/>
      <Setter Property="BoxShadow" Value="0 1 3 0 #20000000"/>
    </Style>

    <!-- 상태 뱃지 -->
    <Style Selector="Border.status-badge">
      <Setter Property="CornerRadius" Value="16"/>
      <Setter Property="Padding" Value="14,6"/>
    </Style>

    <!-- 윈도우 컨트롤 버튼 -->
    <Style Selector="Button.window-btn">
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="Width" Value="46"/>
      <Setter Property="Height" Value="32"/>
      <Setter Property="Padding" Value="0"/>
      <Setter Property="CornerRadius" Value="0"/>
    </Style>
    <Style Selector="Button.window-btn:pointerover /template/ ContentPresenter">
      <Setter Property="Background" Value="{DynamicResource SystemControlHighlightListLowBrush}"/>
    </Style>
    <Style Selector="Button.window-btn-close:pointerover /template/ ContentPresenter">
      <Setter Property="Background" Value="#E81123"/>
    </Style>

    <!-- 하단 네비게이션 버튼 (모바일) -->
    <Style Selector="Button.bottom-nav-btn">
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="Foreground" Value="#FFFFFF80"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="Padding" Value="0,8"/>
      <Setter Property="HorizontalAlignment" Value="Stretch"/>
      <Setter Property="VerticalAlignment" Value="Stretch"/>
      <Setter Property="HorizontalContentAlignment" Value="Center"/>
      <Setter Property="VerticalContentAlignment" Value="Center"/>
    </Style>
    <Style Selector="Button.bottom-nav-btn:pointerover /template/ ContentPresenter">
      <Setter Property="Background" Value="#FFFFFF15"/>
    </Style>
  </UserControl.Styles>

  <Grid ColumnDefinitions="Auto,*" RowDefinitions="*,Auto">
    <!-- 사이드바 (데스크톱 전용) -->
    <Border Grid.Column="0" Grid.RowSpan="2" Classes="sidebar" IsVisible="{Binding ShowSidebar}">
      <Grid RowDefinitions="Auto,*,Auto">
        <!-- 로고 영역 -->
        <Border Grid.Row="0" Padding="20,24,20,20">
          <StackPanel Spacing="4">
            <TextBlock Text="JINO" FontSize="28" FontWeight="Bold" Foreground="White"/>
            <TextBlock Text="ORDER" FontSize="16" FontWeight="Light" Foreground="#FFFFFF80" Margin="2,0,0,0"/>
          </StackPanel>
        </Border>

        <!-- 메뉴 영역 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
          <StackPanel Margin="0,8">
            <!-- 주문접수 -->
            <Button Classes.sidebar-menu="{Binding !IsOrdersSelected}"
                    Classes.sidebar-menu-active="{Binding IsOrdersSelected}"
                    Command="{Binding SelectMenuCommand}"
                    CommandParameter="orders">
              <StackPanel Orientation="Horizontal" Spacing="12">
                <PathIcon Data="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14H7v-2h5v2zm5-4H7v-2h10v2zm0-4H7V7h10v2z"
                         Width="20" Height="20"/>
                <TextBlock Text="주문접수" VerticalAlignment="Center"/>
                <Border Background="#E81123" CornerRadius="10" Padding="8,2" Margin="8,0,0,0"
                        IsVisible="{Binding HasPendingOrders}">
                  <TextBlock Text="{Binding PendingOrderCount}" FontSize="11" Foreground="White" FontWeight="Bold"/>
                </Border>
              </StackPanel>
            </Button>

            <!-- 주문내역 -->
            <Button Classes.sidebar-menu="{Binding !IsHistorySelected}"
                    Classes.sidebar-menu-active="{Binding IsHistorySelected}"
                    Command="{Binding SelectMenuCommand}"
                    CommandParameter="history">
              <StackPanel Orientation="Horizontal" Spacing="12">
                <PathIcon Data="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"
                         Width="20" Height="20"/>
                <TextBlock Text="주문내역" VerticalAlignment="Center"/>
              </StackPanel>
            </Button>

            <!-- 메뉴관리 -->
            <Button Classes.sidebar-menu="{Binding !IsMenuSelected}"
                    Classes.sidebar-menu-active="{Binding IsMenuSelected}"
                    Command="{Binding SelectMenuCommand}"
                    CommandParameter="menu">
              <StackPanel Orientation="Horizontal" Spacing="12">
                <PathIcon Data="M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z"
                         Width="20" Height="20"/>
                <TextBlock Text="메뉴관리" VerticalAlignment="Center"/>
              </StackPanel>
            </Button>

            <Border Height="1" Background="#FFFFFF20" Margin="16,16"/>

            <!-- 고객관리 -->
            <Button Classes.sidebar-menu="{Binding !IsCustomersSelected}"
                    Classes.sidebar-menu-active="{Binding IsCustomersSelected}"
                    Command="{Binding SelectMenuCommand}"
                    CommandParameter="customers">
              <StackPanel Orientation="Horizontal" Spacing="12">
                <PathIcon Data="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"
                         Width="20" Height="20"/>
                <TextBlock Text="고객관리" VerticalAlignment="Center"/>
              </StackPanel>
            </Button>

            <!-- 매출통계 -->
            <Button Classes.sidebar-menu="{Binding !IsStatsSelected}"
                    Classes.sidebar-menu-active="{Binding IsStatsSelected}"
                    Command="{Binding SelectMenuCommand}"
                    CommandParameter="stats">
              <StackPanel Orientation="Horizontal" Spacing="12">
                <PathIcon Data="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"
                         Width="20" Height="20"/>
                <TextBlock Text="매출통계" VerticalAlignment="Center"/>
              </StackPanel>
            </Button>
          </StackPanel>
        </ScrollViewer>

        <!-- 하단 영역: 설정 -->
        <Border Grid.Row="2" Padding="8,16">
          <Button Classes.sidebar-menu="{Binding !IsSettingsSelected}"
                  Classes.sidebar-menu-active="{Binding IsSettingsSelected}"
                  Command="{Binding SelectMenuCommand}"
                  CommandParameter="settings">
            <StackPanel Orientation="Horizontal" Spacing="12">
              <PathIcon Data="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"
                       Width="20" Height="20"/>
              <TextBlock Text="설정" VerticalAlignment="Center"/>
            </StackPanel>
          </Button>
        </Border>
      </Grid>
    </Border>

    <!-- 메인 컨텐츠 영역 -->
    <Grid Grid.Column="1" RowDefinitions="Auto,*">
      <!-- 헤더 -->
      <Border Grid.Row="0" Classes="header">
        <Grid ColumnDefinitions="*,Auto" Margin="24,0">
          <!-- 매장 정보 -->
          <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="16" VerticalAlignment="Center">
            <TextBlock Text="{Binding StoreName}" FontSize="20" FontWeight="Bold"/>

            <Border Classes="status-badge">
              <Border.Background>
                <SolidColorBrush Color="{Binding StatusColor}"/>
              </Border.Background>
              <TextBlock Text="{Binding StatusText}" Foreground="White" FontSize="13" FontWeight="SemiBold"/>
            </Border>

            <StackPanel Orientation="Horizontal" Spacing="6" Opacity="0.7">
              <TextBlock Text="수령시간" FontSize="13"/>
              <TextBlock Text="{Binding PickupTimeText}" FontSize="13" FontWeight="Medium"/>
            </StackPanel>

            <ToggleSwitch IsChecked="{Binding IsOpen}"
                         OnContent="영업중"
                         OffContent="영업종료"/>
          </StackPanel>

          <!-- 윈도우 컨트롤 -->
          <StackPanel Grid.Column="1" Orientation="Horizontal" IsVisible="{Binding ShowWindowControls}">
            <Button Classes="window-btn" Command="{Binding MinimizeWindowCommand}" ToolTip.Tip="최소화">
              <PathIcon Data="M4 12h16" Width="12" Height="12"/>
            </Button>
            <Button Classes="window-btn" Command="{Binding MaximizeWindowCommand}" ToolTip.Tip="최대화">
              <PathIcon Data="M4 4h16v16H4V4zm2 2v12h12V6H6z" Width="12" Height="12"/>
            </Button>
            <Button Classes="window-btn window-btn-close" Command="{Binding CloseWindowCommand}" ToolTip.Tip="닫기">
              <PathIcon Data="M6 6l12 12M6 18L18 6" Width="12" Height="12"/>
            </Button>
          </StackPanel>
        </Grid>
      </Border>

      <!-- 컨텐츠 영역 -->
      <Border Grid.Row="1" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}">
        <Panel>
          <!-- 주문접수 화면 -->
          <views:OrdersView IsVisible="{Binding IsOrdersSelected}" DataContext="{Binding}"/>

          <!-- 메뉴관리 화면 -->
          <views:MenuManagementView IsVisible="{Binding IsMenuSelected}" DataContext="{Binding}"/>

          <!-- 고객관리 화면 -->
          <views:CustomersView IsVisible="{Binding IsCustomersSelected}" DataContext="{Binding}"/>

          <!-- 매출통계 화면 -->
          <views:StatsView IsVisible="{Binding IsStatsSelected}" DataContext="{Binding}"/>

          <!-- 주문내역 화면 -->
          <StackPanel IsVisible="{Binding IsHistorySelected}" Margin="24">
            <TextBlock Text="주문 내역" FontSize="24" FontWeight="Bold" Margin="0,0,0,20"/>
            <TextBlock Text="최근 주문 내역이 여기에 표시됩니다." Opacity="0.6"/>
          </StackPanel>

          <!-- 설정 화면 -->
          <StackPanel IsVisible="{Binding IsSettingsSelected}" Margin="24">
            <TextBlock Text="설정" FontSize="24" FontWeight="Bold" Margin="0,0,0,20"/>
            <TextBlock Text="설정 옵션이 여기에 표시됩니다." Opacity="0.6"/>
          </StackPanel>
        </Panel>
      </Border>
    </Grid>

    <!-- 하단 네비게이션 (모바일 전용) -->
    <Border Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1"
            Background="#1A1A2E" Height="64" IsVisible="{Binding ShowBottomNav}">
      <Grid ColumnDefinitions="*,*,*,*,*">
        <!-- 주문접수 -->
        <Button Grid.Column="0" Classes="bottom-nav-btn"
                Command="{Binding SelectMenuCommand}"
                CommandParameter="orders">
          <StackPanel HorizontalAlignment="Center" Spacing="4">
            <Panel>
              <PathIcon Data="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14H7v-2h5v2zm5-4H7v-2h10v2zm0-4H7V7h10v2z"
                       Width="24" Height="24"/>
              <Border Background="#E81123" CornerRadius="8" Padding="5,1" Margin="14,-8,0,0"
                      HorizontalAlignment="Right" VerticalAlignment="Top"
                      IsVisible="{Binding HasPendingOrders}">
                <TextBlock Text="{Binding PendingOrderCount}" FontSize="10" Foreground="White" FontWeight="Bold"/>
              </Border>
            </Panel>
            <TextBlock Text="주문" FontSize="10" HorizontalAlignment="Center"/>
          </StackPanel>
        </Button>

        <!-- 주문내역 -->
        <Button Grid.Column="1" Classes="bottom-nav-btn"
                Command="{Binding SelectMenuCommand}"
                CommandParameter="history">
          <StackPanel HorizontalAlignment="Center" Spacing="4">
            <PathIcon Data="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"
                     Width="24" Height="24"/>
            <TextBlock Text="내역" FontSize="10" HorizontalAlignment="Center"/>
          </StackPanel>
        </Button>

        <!-- 메뉴관리 -->
        <Button Grid.Column="2" Classes="bottom-nav-btn"
                Command="{Binding SelectMenuCommand}"
                CommandParameter="menu">
          <StackPanel HorizontalAlignment="Center" Spacing="4">
            <PathIcon Data="M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z"
                     Width="24" Height="24"/>
            <TextBlock Text="메뉴" FontSize="10" HorizontalAlignment="Center"/>
          </StackPanel>
        </Button>

        <!-- 고객관리 -->
        <Button Grid.Column="3" Classes="bottom-nav-btn"
                Command="{Binding SelectMenuCommand}"
                CommandParameter="customers">
          <StackPanel HorizontalAlignment="Center" Spacing="4">
            <PathIcon Data="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"
                     Width="24" Height="24"/>
            <TextBlock Text="고객" FontSize="10" HorizontalAlignment="Center"/>
          </StackPanel>
        </Button>

        <!-- 통계 -->
        <Button Grid.Column="4" Classes="bottom-nav-btn"
                Command="{Binding SelectMenuCommand}"
                CommandParameter="stats">
          <StackPanel HorizontalAlignment="Center" Spacing="4">
            <PathIcon Data="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"
                     Width="24" Height="24"/>
            <TextBlock Text="통계" FontSize="10" HorizontalAlignment="Center"/>
          </StackPanel>
        </Button>
      </Grid>
    </Border>
  </Grid>
</UserControl>
