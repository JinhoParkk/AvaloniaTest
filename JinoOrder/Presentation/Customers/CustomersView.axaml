<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:JinoOrder.Presentation.Customers"
             xmlns:models="using:JinoOrder.Domain.Customers"
             mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="600"
             x:Class="JinoOrder.Presentation.Customers.CustomersView"
             x:DataType="vm:CustomersViewModel">

  <UserControl.Styles>
    <Style Selector="Border.customer-card">
      <Setter Property="Background" Value="{DynamicResource SystemControlBackgroundAltHighBrush}"/>
      <Setter Property="CornerRadius" Value="12"/>
      <Setter Property="Padding" Value="16"/>
      <Setter Property="Margin" Value="0,0,0,12"/>
      <Setter Property="BoxShadow" Value="0 2 8 0 #10000000"/>
    </Style>

    <Style Selector="Button.btn-outline">
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="BorderBrush" Value="{DynamicResource TextFillColorSecondaryBrush}"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="Padding" Value="20,10"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Cursor" Value="Hand"/>
    </Style>
    <Style Selector="Button.btn-outline:pointerover /template/ ContentPresenter">
      <Setter Property="Background" Value="{DynamicResource SystemControlHighlightListLowBrush}"/>
    </Style>
  </UserControl.Styles>

  <Grid RowDefinitions="Auto,*" Margin="24">
    <TextBlock Grid.Row="0" Text="고객 관리" FontSize="24" FontWeight="Bold" Margin="0,0,0,20"/>

    <ScrollViewer Grid.Row="1">
      <ItemsControl ItemsSource="{Binding Customers}">
        <ItemsControl.ItemTemplate>
          <DataTemplate x:DataType="models:Customer">
            <Border Classes="customer-card">
              <Grid ColumnDefinitions="*,Auto">
                <StackPanel Grid.Column="0">
                  <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,0,0,8">
                    <TextBlock Text="{Binding Name}" FontSize="18" FontWeight="SemiBold" TextTrimming="CharacterEllipsis"/>
                    <TextBlock Text="{Binding MaskedPhone}" FontSize="14" Foreground="{DynamicResource JinoTextSecondaryBrush}" VerticalAlignment="Center"/>
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Spacing="16">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                      <TextBlock Text="포인트" FontSize="13" Foreground="{DynamicResource JinoTextSecondaryBrush}"/>
                      <TextBlock Text="{Binding FormattedPoints}" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource JinoPrimaryBrush}"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="4">
                      <TextBlock Text="총 주문" FontSize="13" Foreground="{DynamicResource JinoTextSecondaryBrush}"/>
                      <TextBlock Text="{Binding TotalOrders, StringFormat={}{0}회}" FontSize="13"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="4">
                      <TextBlock Text="총 금액" FontSize="13" Foreground="{DynamicResource JinoTextSecondaryBrush}"/>
                      <TextBlock Text="{Binding FormattedTotalSpent}" FontSize="13"/>
                    </StackPanel>
                  </StackPanel>
                </StackPanel>
                <Button Grid.Column="1" Classes="btn-outline" Content="적립하기" VerticalAlignment="Center"/>
              </Grid>
            </Border>
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>
    </ScrollViewer>
  </Grid>
</UserControl>
